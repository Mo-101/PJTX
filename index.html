<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Determinants of Lassa fever MN possible habitat</title>
	<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
	<link href="https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.css" rel="stylesheet">
	<!-- <script src="https://api.mapbox.com/mapbox-gl-js/v2.11.0/mapbox-gl.js"></script> -->
	<style>
		body {
			margin: 0;
			padding: 0;
		}

		#map {
			position: absolute;
			top: 0;
			bottom: 0;
			width: 100%;
		}
	</style>
</head>

<body>
	<style>
		#map {
		position: fixed;
		width: 80%;
		}
		#features {
		width: 20%;
		margin-left: 80%;
		font-family: sans-serif; color: hsl(69, 92%, 46%);
		overflow-y: scroll;
		background-color: #2E378C;
		}
		section {
		padding: 15px 15px;
		line-height: 25px;
		border-bottom: 6px solid hsl(235, 12%, 82%);
		opacity: 0.15;
		font-size: 8px, 1rem;
		}
		section.active {
		opacity: 1;
		}
		section:last-child {
		border-bottom: none;
		margin-bottom: 80vh;
		}
	</style>

	<div id="map"></div>
	<div id="features">

		<section id="nigeria" class="active">
			<h3> Determinant of lassa fever epidemioloy
					2018 - 2021 Analysis</h3>
			<p>
				Mastomys natalensis possible habitat areas
				along Niger & Benue River Inland-Shoreline
			</p>
		</section>

		<section id="ilushi">
			<h3>Ilushi - Edo State</h3>
			<p>
				Built up area in Edo State, Esan North-West 
				with more than 100 confirmed cases
			</p>
		</section>

		<section id="agenebode">
			<h3>Etsako East, Edo State</h3>
			<p>
				Agenebode a village in Etsako East with Confirmed LF cases
				Its next to Etsako west with more than 200 cases
			</p>
		</section>

		<section id="idah">
			<h3>Idah, Kogi</h3>
			<p>
				Idah, an LGA in Kogi with multiple positive cases
			</p>
		</section>

		<section id="itobe">
			<h3>Itobe, Benue</h3>
			<p>
				A village in Benue state with almost immensed settlement
			</p>
		</section>

		<section id="lokoja">
			<h3>Lokoja, Kogi</h3>
			<p>
				Lokoja, an LGA in Kogi state with a high number of
				Lassa fever positive cases
			</p>
		</section>

		<section id="zugbe">
			<h3>Zugbe, Benue</h3>
			<p>
				Built up area in Benue State
			</p>
		</section>

		<section id="bagana">
			<h3>Bagana, Kogi</h3>
			<p>
				Built up area in Benue State
			</p>
		</section>

		<section id="loko">
			<h3>Loko, Nassarawa</h3>
			<p>
				Mycroft responds to Sherlock's 
			
			</p>
		</section>

		<section id="makurdi">
			<h3>Makurdi, Benue</h3>
			<p>
				Mycroft responds to Sherlock's telegram and mentions several spies.
			</p>
		</section>

		<section id="makurdi north">
			<h3>Markurdi North, Benue</h3>
			<p>
				Mycroft responds to Sherlock's telegram and mentions several spies.
			</p>
		</section>

		<section id="gbajimba">
			<h3>Gbajimba, Benue</h3>
			<p>
				Mycroft responds to Sherlock's telegram and mentions several spies.
			</p>
		</section>

		<section id="chinka">
			<h3>Chinka, Taraba</h3>
			<p>
				Mycroft responds to Sherlock's telegram and mentions several spies.
			</p>
		</section>

		<section id="ibi">
			<h3>Ibi, Taraba</h3>
			<p>
				Mycroft responds to Sherlock's telegram and mentions several spies.
			</p>
		</section>

	</div>
	<script src="js/qgis2web_expressions.js"></script>
        <script src="./mapbox/mapbox-gl.js"></script>
		
	<script src="./mapbox/style.js"></script>
	<script src="./js/Autolinker.min.js"></script>

	<script>
		// TO MAKE THE MAP APPEAR YOU MUST
		// ADD YOUR ACCESS TOKEN FROM
		// https://account.mapbox.com
		mapboxgl.accessToken = window.localStorage.getItem('MapboxAccessToken','pk.eyJ1IjoiYWthbmltbzEiLCJhIjoiY2w5ODU2cjR2MDR3dTNxcXRpdG5jb3Z6dyJ9.vi2wspa-B9a9gYYWMpEm0A');
		mapboxgl.accessToken = 'pk.eyJ1IjoiYWthbmltbzEiLCJhIjoiY2w5ODU2cjR2MDR3dTNxcXRpdG5jb3Z6dyJ9.vi2wspa-B9a9gYYWMpEm0A';
		// const map = new mapboxgl.Map({
		// 	container: 'map',
		// 	// Choose from Mapbox's core styles, or make your own style with Mapbox Studio
		// 	style: 'mapbox://styles/mapbox/satellite-streets-v12',
		// 	center: [-0.15591514, 51.51830379],
		// 	zoom: 15.5,
		// 	bearing: 27,
		// 	pitch: 45
		// });

		var map = new mapboxgl.Map({
			container: 'map',
			style: styleJSON,
			center: [34.5085, 8.7832],
			zoom: 3,
			bearing: 0,
			attributionControl: false
		});

		map.on('style.load', () => {
			map.addSource('mapbox-dem', {
			'type': 'raster-dem',
			'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',
			'tileSize': 512,
			'maxzoom': 14
			});
			// add the DEM source as a terrain layer with exaggerated height
			map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 3});
			});

		const chapters = {
			'nigeria': {
				duration: 50,
				center: [9.0820,8.6753],
				bearing: 0,
				zoom: 0,
				pitch: 0
			},

			'ilushi': {
				bearing: 230,
				center: [6.631255,6.669366],
				zoom: 17,
				speed: 0.3,
				pitch: 50
			},

			'agenebode': {
				bearing: 280,
				center: [6.691843, 7.106429],
				zoom: 15,
				speed: 0.3,
				pitch: 45
			},

			'idah': {
				bearing: 110,
				center: [6.727696,7.106738],
				zoom: 15.5,
				speed: 0.3,
				pitch: 45
			},

			'itobe': {
				bearing: 90,
				center: [6.713540,7.412357],
				zoom: 16.5,
				speed: 0.3,
				pitch: 50
			},

			'lokoja': {
				bearing: 280,
				center: [6.747502,7.797786],
				zoom: 16.5,
				speed: 0.3,
				pitch: 35
			},
			
			'zugbe': {
				bearing: 150,
				center: [7.249016,8.008789],
				zoom: 17,
				speed: 0.4,
				pitch: 55
			},
			
			'bagana': {
				bearing: 200,
				center: [7.596399,8.030839],
				zoom: 16.5,
				speed: 0.3,
				pitch: 45
			},

			'loko': {
				bearing: 350,
				center: [7.842589,7.995965],
				zoom: 16,
				speed: 0.3,
				pitch: 45
			},

			'makurdi': {
				bearing: 210,
				center: [8.540207,7.737422],
				zoom: 15,
				speed: 0.3,
				pitch: 45
			},

			'makurdi north': {
				bearing: 40,
				center: [8.548938,7.742094],
				zoom: 16,
				speed: 0.3,
				pitch: 35
			},

			'gbajimba': {
				bearing: 350,
				center: [8.861989,7.813916],
				zoom: 16,
				speed: 0.3,
				pitch: 45
			},

			'chinka': {
				bearing: 170,
				center: [9.423668,8.029803],
				zoom: 16.5,
				speed: 0.3,
				pitch: 45
			},

			'ibi': {
				bearing: 180,
				center: [9.741507,8.187417],
				zoom: 16,
				speed: 0.3,
				pitch: 35
			},	
		};
			// create the popup
			const popup1 = new mapboxgl.Popup({ offset: 25 }).setText(
			'Illushi, Esan North East LGA, Edo State'
			);

			const popup2 = new mapboxgl.Popup({ offset: 25 }).setText(
			'Agenebode, Etsako East LGA, Edo State'
			);

			const popup3 = new mapboxgl.Popup({ offset: 25 }).setText(
			'Idah LGA, Kogi State'
			);

			const popup4 = new mapboxgl.Popup({ offset: 25 }).setText(
			'Itobe, Benue State'
			);

			const popup5 = new mapboxgl.Popup({ offset: 25 }).setText(
			'Lokoja, Kogi State'
			);

			const popup6 = new mapboxgl.Popup({ offset: 25 }).setText(
			'Zugbe, Benue State'
			);

			const popup7 = new mapboxgl.Popup({ offset: 25 }).setText(
			'Bagana, Kogi State'
			);

			const popup8 = new mapboxgl.Popup({ offset: 25 }).setText(
			'Loko, Nassarawa State'
			);

			const popup9 = new mapboxgl.Popup({ offset: 25 }).setText(
			'Makurdi, Benue State'
			);

			const popup10 = new mapboxgl.Popup({ offset: 25 }).setText(
			'Makurdi North, Benue State'
			);

			const popup11 = new mapboxgl.Popup({ offset: 25 }).setText(
			'Gbajimba, Benue State'
			);

			const popup12 = new mapboxgl.Popup({ offset: 25 }).setText(
			'Chinka, Taraba State'
			);

			const popup13 = new mapboxgl.Popup({ offset: 25 }).setText(
			'Ibi, Taraba State'
			);

			// Create a default Marker and add it to the map.
			const marker1 = new mapboxgl.Marker()
			.setLngLat([6.631255,6.669366])
			.setPopup(popup1)
			.addTo(map);
			
			// Create a default Marker, colored black, rotated 45 degrees.
			const marker2 = new mapboxgl.Marker({ color: 'black', rotation: 45, chapterName: "Illushi"})
			.setLngLat([6.691843, 7.106429])
			.setPopup(popup2)
			.addTo(map);

			const marker3 = new mapboxgl.Marker({ color: 'green', rotation: 45 })
			.setLngLat([6.727696,7.106738])
			.setPopup(popup3)
			.addTo(map);

			const marker4 = new mapboxgl.Marker({ color: 'red', rotation: 45 })
			.setLngLat([6.713540,7.412357])
			.setPopup(popup4)
			.addTo(map);

			const marker5 = new mapboxgl.Marker({ color: 'yellow', rotation: 45 })
			.setLngLat([6.747502,7.797786])
			.setPopup(popup5)
			.addTo(map);

			const marker6 = new mapboxgl.Marker({ color: 'pink', rotation: 45 })
			.setLngLat([7.249016,8.008789])
			.setPopup(popup6)
			.addTo(map);

			const marker7 = new mapboxgl.Marker({ color: 'gray', rotation: 45 })
			.setLngLat([7.596399,8.030839])
			.setPopup(popup7)
			.addTo(map);

			const marker8 = new mapboxgl.Marker({ color: 'orange', rotation: 45 })
			.setLngLat([7.842589,7.995965])
			.setPopup(popup8)
			.addTo(map);

			const marker9 = new mapboxgl.Marker({ color: 'cyan', rotation: 45 })
			.setLngLat([8.540207,7.737422])
			.setPopup(popup9)
			.addTo(map);

			const marker10 = new mapboxgl.Marker({ color: 'white', rotation: 45 })
			.setLngLat([8.548938,7.742094])
			.setPopup(popup10)
			.addTo(map);

			const marker11 = new mapboxgl.Marker({ color: 'lemon', rotation: 45 })
			.setLngLat([8.861989,7.813916])
			.setPopup(popup11)
			.addTo(map);

			const marker12 = new mapboxgl.Marker({ color: 'turquoise', rotation: 45 })
			.setLngLat([9.423668,8.029803])
			.setPopup(popup12)
			.addTo(map);

			const marker13 = new mapboxgl.Marker({ color: 'violet', rotation: 45 })
			.setLngLat([9.741507,8.187417])
			.setPopup(popup13)
			.addTo(map);

		let activeChapterName = 'free';
		function setActiveChapter(chapterName) {
			if (chapterName === activeChapterName) return;

			map.flyTo(chapters[chapterName]);

			document.getElementById(chapterName).classList.add('active');
			document.getElementById(activeChapterName).classList.remove('active');

			activeChapterName = chapterName;
		}

		function isElementOnScreen(id) {
			const element = document.getElementById(id);
			const bounds = element.getBoundingClientRect();
			return bounds.top < window.innerHeight && bounds.bottom > 0;
		}

		// On every scroll event, check which element is on screen
		window.onscroll = () => {
			for (const chapterName in chapters) {
				if (isElementOnScreen(chapterName)) {
					setActiveChapter(chapterName);
					break;
				}
			}
		};
	</script>
</body>
</html>